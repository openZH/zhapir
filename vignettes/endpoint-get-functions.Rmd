---
title: "endpoint-get-functions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{endpoint-get-functions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
# FIXME: Replace devtools::load_all(".") as soon as package is released
# library(zhapir)
devtools::load_all(".")

```

# Introduction

When creating/updating a data set or a distribution, you have to specify the values for the respective API-Enpoints. For a data set, for example, you have to specify relevant keywords (among other endpoint values). To address this, zhapir offers two related function types:

1.  `get_[...]`**-Functions:** Retrieve all possible values and the corresponding IDs of a given endpoint

```{r}
# Example for the endpoint 'keywords'
df_keywords <- get_keywords()
nrow(df_keywords)
head(df_keywords)
```

2.  `get_[...]_id`**-Functions:** Retrieve the ID associated with a keyword

```{r}
# Example for the endpoint 'keywords'

get_keywords_id(c("abfall", "abgase", "luftqualitaet"))
```

# Function Overview

This section provides you an overview of all the get-functions for the available endpoints. For most of the functions there are both function type (i.e. the `get_[...]`- and`get_[...]_id`-function). However, for the endpoints **organisations** and **licenses**, the actual values are too complex and it is easier to look the enter the ID's manually after having them looked up.

## Organisations

```{r}
df_organisations <- get_organisations()
head(df_organisations)
```

Note that there is not `get_organisations_id()`-function which means that the organisation ID has to be entered manually when creating/updating as dataset or a distribution.

## Keywords

```{r}
df_keywords <-  get_keywords()
head(df_keywords)
```

```{r}
get_keywords_id(c("abfall", "luftqualitaet"))
```

## Zh_web_catalog

```{r}

df_zh_web_catalog <-  get_zh_web_catalog()
head(df_zh_web_catalog)

```

```{r}
get_zh_web_catalog_id("Geodaten")
```

## Themes

```{r}
df_themes <- get_themes()
head(df_themes)
```

```{r}
get_themes_id("Wirtschaft und Finanzen")
```

## Periodicities

```{r}
df_periocidity <- get_periodicities()
head(df_periocidity)
```

```{r}
get_periodicities_id("HalbjÃ¤hrlich")
```

## Statuses

```{r}

df_status <- get_statuses()
head(df_status)

```

```{r}
get_statuses_id("Entwurf")
```

## Licenses

```{r}
df_license <- get_licenses()
head(df_license)
```

Note that there is not `get_licenses_id()`-function which means that the license ID has to be entered manually when creating/updating as data set or a distribution.

## Formats

```{r}
df_format <- get_formats()
head(df_format)
```

```{r}
get_formats_id("CSV")
```

# Workflow example

Note that that in theory, you can retrieve the ID's from the `get_keywords`-ouput manually. However, it is more transparent to specify the a new data set or distribution using the actual values of the endpoints. The only endpoints where you work with ID's when dealing with data sets and distributions are `organisations` and `licenses`. Keeping this in mind a typical workflow when working with the endpoint-get-functions could look like this:

```{r}
# Example Parameters:
# - Organisation: ARE

# Look up the Organisation
df_organsiations <- get_organisations()
head(df_organisations)

# Check what keywords are available
df_keywords <- get_keywords()
head(df_keywords)

# create the data set 
create_dataset("Hello Dataset 1",
               organisation_id = 1, # ARE
               description = "Such insights, much wow!",
               keyword_ids  = get_keywords_id(c("abfall", "abgase", "luftqualitaet"))
               )



```

create_dataset("Hello Dataset 1", organisation_id = 14, description = "Such insights, much wow!")

Example:

create_dataset("Hello Dataset 1", organisation_id = 14, \# note that for organisation_id you have to specify the actual ID description = "Such insights, much wow!", keyword_ids = list(get_keywords_id("abfall"), get_keywords_id("abgase"), get_keywords_id("luftqualitaet") ) )
